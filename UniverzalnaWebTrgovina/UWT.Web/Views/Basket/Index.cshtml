@using Microsoft.AspNet.Identity
@using Newtonsoft.Json
@using UWT.Web.Extensions
@using UWT.Web.Models
@model BasketViewModel
@{
    var shop = (ShopViewModel)ViewBag.Shop;
    Layout = "~/Views/Shared/PageLayouts/" + shop.GetPageLayout().Layout;
    var style = shop.GetPageStyle();
    ViewBag.ShopId = shop.Id;
    ViewBag.UserId = User.Identity.GetUserId();
}
<style>
    .navimage {
        background-color: @style.NavColor;
        background-image: url(@style.BackgroundImage.Replace("~", ""));
        background-repeat: no-repeat;
        background-size: cover;
        height: 180px;
        margin-top: -50px;
    }
    .footerimage {
        background-color: @style.NavColor;
        background-image: url(@style.FooterImage.Replace("~", ""));
        background-repeat: no-repeat;
        background-size: cover;
        height: 180px;
    }
    .searchbar, .logo, nav {
        background-color: @style.NavColor;
    }
    .categoryList-image {
        max-height: 100%;
        max-width: 100%;
    }
    .img-logo {
        height: 100%;
        padding: 5px;
    }
    .logo {
        height: 57px;
    }
    body {
        background-color: @style.BackgroundColor;
    }
    h2, h3, body {
        color: @style.ForegroundColor;
    }
    .vertical-center {
        position: relative;
        transform: translateY(50%);
    }
    a {
        text-decoration: none;
    }
    .products {
        min-height: 500px;
    }
    .product-container {
        background-color: @style.SheetColor;
    }
    .productItem div {
        height: 120px;
    }
    .sheet {
        background-color: @style.SheetColor;
    }
</style>

@section pageBegin {
    <!DOCTYPE html>
    <html ng-app="uwtApp">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>@ViewBag.Title - Univerzalna trgovina</title>
        @Styles.Render("~/Content/css")
        <link href="~/Content/animations.min.css" rel="stylesheet" />
        <link href="~/Content/uwtShops.css" rel="stylesheet" />
        <link href="~/Content/GalleryItem.css" rel="stylesheet" />
        @Scripts.Render("~/bundles/modernizr")
        <script src="~/Scripts/jquery-2.1.4.min.js"></script>
        <script src="~/Scripts/angular.min.js"></script>
        <link href="~/Content/Vitality.css" rel="stylesheet" />
        <link href="~/Content/startbootstrap.css" rel="stylesheet" />
        <script src="~/Scripts/Controllers/UwtControllers.js"></script>
        <script>
            var basketController = new BasketController(@Html.Raw(JsonConvert.SerializeObject(Model)), "@ViewBag.ShopId", "@Url.Action("AddToBasket", "Basket")", "@Url.Action("RemoveFromBasket", "Basket")", "@Url.Action("UpdateBasketAmount", "Basket")");
        </script>
    </head>
    <body ng-controller="BasketController">
}

@section navImage {
    <div class="navimage"></div>
}
@section logo {
    <a href="@Url.Action("Index", "Home", new {Model.Id})">
        <div class="pull-left logo">
            <img class="img-logo" src="@style.Logo.Replace("~", "")" alt="" />
        </div>
        <h3 class="pull-left" style="margin-left: 10px">@shop.Name</h3>
    </a>
    <a class="pull-right btn btn-default vertical-center" href="@Url.Action("Index", "Home", new {Id = 0})">
        Sve trgovine
    </a>
}

@section footer {
    <div class="footerimage"></div>
}
@section basketContent {
<div class="row">
    <div ng-repeat="item in basket.BasketItems" class="col-md-12">
        <div style="width: 100%; height: 64px">
            <div style="width: 64px; float: left; margin-right: 16px;">
                <img class="categoryList-image" src="{{item.Product.Image}}" alt=""/>
            </div>
            <h3 style="font-size: 20px; padding: 20px" class="pull-left" ng-bind="{{item.Product.Title}}"></h3>
            <h3 style="font-size: 20px; padding: 20px" class="pull-left">
                <span ng-bind="{{item.Product.UnitPrice}}"></span>
                <span>kn</span>
            </h3>
            <h3 style="font-size: 20px; padding: 20px" class="pull-left">
                <span>Količina (kom):</span>
            </h3>
            <div class="pull-left col-md-3" style="padding: 20px">
                <input type="number" class="form-control" ng-model="item.Amount" ng-change="item.onAmountChanged()" max="{{item.Product.Count}}" min="1"/>
            </div>
            <h3 style="font-size: 20px; padding: 20px" class="pull-right">
                <span ng-bind="item.Product.UnitPrice * item.Amount"></span>
                <span>kn</span>
            </h3>
        </div>
    </div>
</div>
<hr/>
<div class="row">

</div>
}
@section contact {
    <div class="form-horizontal">
        <h3>Kontakt</h3>
        <div class="form-group">
            <label class="col-md-4">Adresa:</label>
            <label class="col-md-8">@shop.Address</label>
        </div>
        <div class="form-group">
            <label class="col-md-4">Telefonski broj:</label>
            <label class="col-md-8">@shop.Phone</label>
        </div>
        <div class="form-group">
            <label class="col-md-4">Email:</label>
            <label class="col-md-8">@shop.Email</label>
        </div>
    </div>
}
@section basket {
    <a href="@Url.Action("Index", "Home", new{ shop.Id })" class="btn btn-default col-md-12">Povratak na kupovinu</a>
}
@section pageEnd {
</body>
</html>
}
